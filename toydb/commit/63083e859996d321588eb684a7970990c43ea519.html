<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>docs: added documentation for CREATE TABLE and DROP TABLE statements - toydb - An SQL engine written in Rust
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>toydb</h1><span class="desc">An SQL engine written in Rust
</span></td></tr><tr class="url"><td></td><td>git clone <a href="https://github.com/erikgrinaker/toydb">https://github.com/erikgrinaker/toydb</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/63083e859996d321588eb684a7970990c43ea519.html">63083e859996d321588eb684a7970990c43ea519</a>
<b>parent</b> <a href="../commit/ba14771a4bcd79b0ba1c62011cd4c9ce7837e355.html">ba14771a4bcd79b0ba1c62011cd4c9ce7837e355</a>
<b>Author:</b> Erik Grinaker &lt;<a href="mailto:erik@grinaker.org">erik@grinaker.org</a>&gt;
<b>Date:</b>   Fri, 10 Jan 2020 12:10:50 +0100

docs: added documentation for CREATE TABLE and DROP TABLE statements

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">docs/README.md</a></td><td> | </td><td class="num">68</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">src/sql/tests/schema.rs</a></td><td> | </td><td class="num">6</td><td><span class="i">++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h2">src/sql/tests/schema/create_table_default_expr</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h3">src/sql/tests/schema/create_table_null</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h4">src/sql/tests/schema/create_table_null_default</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h5">src/sql/tests/schema/create_table_null_not</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h6">src/sql/tests/schema/create_table_null_not_null</a></td><td> | </td><td class="num">5</td><td><span class="i">+++++</span><span class="d"></span></td></tr>
</table></pre><pre>7 files changed, 101 insertions(+), 6 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/docs/README.md.html">docs/README.md</a> b/<a href="../file/docs/README.md.html">docs/README.md</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -55,9 +55,13 @@ Sequences of digits `0-9` are parsed as a 64-bit signed integer. Numbers with de
</a> 
 The `-` prefix operator can be used to take negative numbers.
 
<a href="#h0-0-3" id="h0-0-3" class="d">-### Operators
</a><a href="#h0-0-4" id="h0-0-4" class="i">+### Expressions
</a> 
<a href="#h0-0-6" id="h0-0-6" class="d">-#### Logical operators
</a><a href="#h0-0-7" id="h0-0-7" class="i">+Expressions can be used wherever a value is expected, e.g. as `SELECT` fields and `INSERT` values, and can be either a constant, a column reference, or an operator invocation.
</a><a href="#h0-0-8" id="h0-0-8" class="i">+
</a><a href="#h0-0-9" id="h0-0-9" class="i">+## SQL Operators
</a><a href="#h0-0-10" id="h0-0-10" class="i">+
</a><a href="#h0-0-11" id="h0-0-11" class="i">+### Logical operators
</a> 
 Logical operators apply standard logic operations on boolean operands.
 
<a href="#h0-1" id="h0-1" class="h">@@ -85,7 +89,7 @@ The complete truth tables are:
</a> | **`FALSE`** | `TRUE`  |
 | **`NULL`**  | `NULL`  |
 
<a href="#h0-1-3" id="h0-1-3" class="d">-#### Comparison operators
</a><a href="#h0-1-4" id="h0-1-4" class="i">+### Comparison operators
</a> 
 Comparison operators compare values of the same data type, and return `TRUE` if the comparison holds, otherwise `FALSE`. `INTEGER` and `FLOAT` values are interchangeable. `STRING` comparisons are byte-wise, i.e. case-sensitive with `B` considered lesser than `a` due to their UTF-8 code points. `FALSE` is considered lesser than `TRUE`. Comparison with `NULL` always yields `NULL` (even `NULL = NULL`).
 
<a href="#h0-2" id="h0-2" class="h">@@ -103,7 +107,7 @@ Unary operators:
</a> * `IS NULL`: checks if the value is `NULL`, e.g. `NULL IS NULL` yields `TRUE`.
 * `IS NOT NULL`: checks if the value is not `NULL`, e.g. `TRUE IS NOT NULL` yields `TRUE`.
 
<a href="#h0-2-3" id="h0-2-3" class="d">-#### Mathematical operators
</a><a href="#h0-2-4" id="h0-2-4" class="i">+### Mathematical operators
</a> 
 Mathematical operators apply standard math operations on numeric (`INTEGER` or `FLOAT`) operands. If either operand is a `FLOAT`, both operands are converted to `FLOAT` and the result is a `FLOAT`. If either operand is `NULL`, the result is `NULL`. The special values `INFINITY` and `NAN` are handled according to the IEEE 754 `binary64` spec.
 
<a href="#h0-3" id="h0-3" class="h">@@ -124,13 +128,13 @@ Unary operators:
</a> * `-` (prefix): negation, e.g. `- -2` yields `2`.
 * `!` (postfix): factorial, e.g. `5!` yields `15`.
 
<a href="#h0-3-3" id="h0-3-3" class="d">-#### String operators
</a><a href="#h0-3-4" id="h0-3-4" class="i">+### String operators
</a> 
 String operators operate on string operands.
 
 * `LIKE`: compares a string with the given pattern, using `%` as multi-character wildcard and `_` as single-character wildcard, returning `TRUE` if the string matches the pattern - e.g. `&#39;abc&#39; LIKE &#39;a%&#39;` yields `TRUE`.  Literal `%` and `_` can be escaped as `%%` and `__`.
 
<a href="#h0-3-10" id="h0-3-10" class="d">-#### Operator precedence
</a><a href="#h0-3-11" id="h0-3-11" class="i">+### Operator precedence
</a> 
 The operator precedence (order of operations) is as follows:
 
<a href="#h0-4" id="h0-4" class="h">@@ -147,3 +151,54 @@ The operator precedence (order of operations) is as follows:
</a> | 1          | `OR`                     | Left          |
 
 Precedence can be overridden by wrapping an expression in parentheses, e.g. `(1 + 2) * 3`.
<a href="#h0-4-3" id="h0-4-3" class="i">+
</a><a href="#h0-4-4" id="h0-4-4" class="i">+## SQL Statements
</a><a href="#h0-4-5" id="h0-4-5" class="i">+
</a><a href="#h0-4-6" id="h0-4-6" class="i">+### `CREATE TABLE`
</a><a href="#h0-4-7" id="h0-4-7" class="i">+
</a><a href="#h0-4-8" id="h0-4-8" class="i">+Creates a new table.
</a><a href="#h0-4-9" id="h0-4-9" class="i">+
</a><a href="#h0-4-10" id="h0-4-10" class="i">+&lt;pre&gt;
</a><a href="#h0-4-11" id="h0-4-11" class="i">+CREATE TABLE &lt;b&gt;&lt;i&gt;table_name&lt;/i&gt;&lt;/b&gt; (
</a><a href="#h0-4-12" id="h0-4-12" class="i">+    [ &lt;b&gt;&lt;i&gt;column_name&lt;/i&gt;&lt;/b&gt; &lt;b&gt;&lt;i&gt;data_type&lt;/i&gt;&lt;/b&gt; [ &lt;b&gt;&lt;i&gt;column_constraint&lt;/i&gt;&lt;/b&gt; [ ... ] ] [, ... ] ]
</a><a href="#h0-4-13" id="h0-4-13" class="i">+)
</a><a href="#h0-4-14" id="h0-4-14" class="i">+
</a><a href="#h0-4-15" id="h0-4-15" class="i">+where &lt;b&gt;&lt;i&gt;column_constraint&lt;/i&gt;&lt;/b&gt; is:
</a><a href="#h0-4-16" id="h0-4-16" class="i">+
</a><a href="#h0-4-17" id="h0-4-17" class="i">+{ NOT NULL | NULL | PRIMARY KEY | DEFAULT &lt;b&gt;&lt;i&gt;expr&lt;/i&gt;&lt;/b&gt; }
</a><a href="#h0-4-18" id="h0-4-18" class="i">+&lt;/pre&gt;
</a><a href="#h0-4-19" id="h0-4-19" class="i">+
</a><a href="#h0-4-20" id="h0-4-20" class="i">+* ***`table_name`***: The name of the table. Must be a [valid identifier](#identifiers). Errors if a table with this name already exists.
</a><a href="#h0-4-21" id="h0-4-21" class="i">+
</a><a href="#h0-4-22" id="h0-4-22" class="i">+* ***`column_name`***: The name of the column. Must be a [valid identifier](#identifiers), and unique within the table.
</a><a href="#h0-4-23" id="h0-4-23" class="i">+
</a><a href="#h0-4-24" id="h0-4-24" class="i">+* ***`data_type`***: The data type of the column, see [data types](#data-types) for valid types.
</a><a href="#h0-4-25" id="h0-4-25" class="i">+
</a><a href="#h0-4-26" id="h0-4-26" class="i">+* `NOT NULL`: The column may not contain `NULL` values.
</a><a href="#h0-4-27" id="h0-4-27" class="i">+
</a><a href="#h0-4-28" id="h0-4-28" class="i">+* `NULL`: The column may contain `NULL` values. This is the default.
</a><a href="#h0-4-29" id="h0-4-29" class="i">+
</a><a href="#h0-4-30" id="h0-4-30" class="i">+* `PRIMARY KEY`: The column should act as a primary key, i.e. the main row identifier. A table must have exactly one primary key column, and it must be unique and non-nullable.
</a><a href="#h0-4-31" id="h0-4-31" class="i">+
</a><a href="#h0-4-32" id="h0-4-32" class="i">+* `DEFAULT`***`expr`***: Specifies a default value for the column when `INSERT` statements do not give a value. ***`expr`*** can be any constant expression of an appropriate data type, e.g. `&#39;abc&#39;` or `1 + 2 * 3`. For nullable columns, the default value is `NULL` unless specified otherwise.
</a><a href="#h0-4-33" id="h0-4-33" class="i">+
</a><a href="#h0-4-34" id="h0-4-34" class="i">+#### Example
</a><a href="#h0-4-35" id="h0-4-35" class="i">+
</a><a href="#h0-4-36" id="h0-4-36" class="i">+```
</a><a href="#h0-4-37" id="h0-4-37" class="i">+CREATE TABLE movie (
</a><a href="#h0-4-38" id="h0-4-38" class="i">+    id INTEGER PRIMARY KEY,
</a><a href="#h0-4-39" id="h0-4-39" class="i">+    title STRING NOT NULL,
</a><a href="#h0-4-40" id="h0-4-40" class="i">+    release_year INTEGER,
</a><a href="#h0-4-41" id="h0-4-41" class="i">+    bluray BOOLEAN NOT NULL DEFAULT TRUE
</a><a href="#h0-4-42" id="h0-4-42" class="i">+)
</a><a href="#h0-4-43" id="h0-4-43" class="i">+```
</a><a href="#h0-4-44" id="h0-4-44" class="i">+
</a><a href="#h0-4-45" id="h0-4-45" class="i">+### `DROP TABLE`
</a><a href="#h0-4-46" id="h0-4-46" class="i">+
</a><a href="#h0-4-47" id="h0-4-47" class="i">+Deletes a table and all contained data.
</a><a href="#h0-4-48" id="h0-4-48" class="i">+
</a><a href="#h0-4-49" id="h0-4-49" class="i">+&lt;pre&gt;
</a><a href="#h0-4-50" id="h0-4-50" class="i">+DROP TABLE &lt;b&gt;&lt;i&gt;table_name&lt;/i&gt;&lt;/b&gt;
</a><a href="#h0-4-51" id="h0-4-51" class="i">+&lt;/pre&gt;
</a><a href="#h0-4-52" id="h0-4-52" class="i">+
</a><a href="#h0-4-53" id="h0-4-53" class="i">+* ***`table_name`***: the table to delete. Errors if it does not exist.
</a><a href="#h0-4-54" id="h0-4-54" class="i">+\ No newline at end of file
</a><b>diff --git a/<a id="h1" href="../file/src/sql/tests/schema.rs.html">src/sql/tests/schema.rs</a> b/<a href="../file/src/sql/tests/schema.rs.html">src/sql/tests/schema.rs</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -85,12 +85,18 @@ test_schema! {
</a>     create_table_pk_nullable: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY NULL)&quot;,
     create_table_pk_default: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY DEFAULT 1)&quot;,
 
<a href="#h1-0-3" id="h1-0-3" class="i">+    create_table_null: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NULL)&quot;,
</a><a href="#h1-0-4" id="h1-0-4" class="i">+    create_table_null_not: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NOT NULL)&quot;,
</a><a href="#h1-0-5" id="h1-0-5" class="i">+    create_table_null_not_null: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NULL NOT NULL)&quot;,
</a><a href="#h1-0-6" id="h1-0-6" class="i">+    create_table_null_default: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING)&quot;,
</a><a href="#h1-0-7" id="h1-0-7" class="i">+
</a>     create_table_default_boolean: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value BOOLEAN DEFAULT TRUE)&quot;,
     create_table_default_float: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value FLOAT DEFAULT 3.14)&quot;,
     create_table_default_integer: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value INTEGER DEFAULT 7)&quot;,
     create_table_default_string: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING DEFAULT &#39;foo&#39;)&quot;,
     create_table_default_null: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING DEFAULT NULL)&quot;,
     create_table_default_null_not: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NOT NULL DEFAULT NULL)&quot;,
<a href="#h1-0-14" id="h1-0-14" class="i">+    create_table_default_expr: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value INTEGER DEFAULT 1 + 2 * 3)&quot;,
</a>     create_table_default_conflict: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING DEFAULT 7)&quot;,
     create_table_default_conflict_float_integer: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value FLOAT DEFAULT 7)&quot;,
     create_table_default_conflict_integer_float: &quot;CREATE TABLE name (id INTEGER PRIMARY KEY, value INTEGER DEFAULT 3.14)&quot;,
<b>diff --git a/<a id="h2" href="../file/src/sql/tests/schema/create_table_default_expr.html">src/sql/tests/schema/create_table_default_expr</a> b/<a href="../file/src/sql/tests/schema/create_table_default_expr.html">src/sql/tests/schema/create_table_default_expr</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -0,0 +1,7 @@
</a><a href="#h2-0-0" id="h2-0-0" class="i">+Query: CREATE TABLE name (id INTEGER PRIMARY KEY, value INTEGER DEFAULT 1 + 2 * 3)
</a><a href="#h2-0-1" id="h2-0-1" class="i">+
</a><a href="#h2-0-2" id="h2-0-2" class="i">+Storage:
</a><a href="#h2-0-3" id="h2-0-3" class="i">+CREATE TABLE name (
</a><a href="#h2-0-4" id="h2-0-4" class="i">+  id INTEGER PRIMARY KEY NOT NULL,
</a><a href="#h2-0-5" id="h2-0-5" class="i">+  value INTEGER DEFAULT 7
</a><a href="#h2-0-6" id="h2-0-6" class="i">+)
</a><b>diff --git a/<a id="h3" href="../file/src/sql/tests/schema/create_table_null.html">src/sql/tests/schema/create_table_null</a> b/<a href="../file/src/sql/tests/schema/create_table_null.html">src/sql/tests/schema/create_table_null</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -0,0 +1,7 @@
</a><a href="#h3-0-0" id="h3-0-0" class="i">+Query: CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NULL)
</a><a href="#h3-0-1" id="h3-0-1" class="i">+
</a><a href="#h3-0-2" id="h3-0-2" class="i">+Storage:
</a><a href="#h3-0-3" id="h3-0-3" class="i">+CREATE TABLE name (
</a><a href="#h3-0-4" id="h3-0-4" class="i">+  id INTEGER PRIMARY KEY NOT NULL,
</a><a href="#h3-0-5" id="h3-0-5" class="i">+  value STRING DEFAULT NULL
</a><a href="#h3-0-6" id="h3-0-6" class="i">+)
</a><b>diff --git a/<a id="h4" href="../file/src/sql/tests/schema/create_table_null_default.html">src/sql/tests/schema/create_table_null_default</a> b/<a href="../file/src/sql/tests/schema/create_table_null_default.html">src/sql/tests/schema/create_table_null_default</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -0,0 +1,7 @@
</a><a href="#h4-0-0" id="h4-0-0" class="i">+Query: CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING)
</a><a href="#h4-0-1" id="h4-0-1" class="i">+
</a><a href="#h4-0-2" id="h4-0-2" class="i">+Storage:
</a><a href="#h4-0-3" id="h4-0-3" class="i">+CREATE TABLE name (
</a><a href="#h4-0-4" id="h4-0-4" class="i">+  id INTEGER PRIMARY KEY NOT NULL,
</a><a href="#h4-0-5" id="h4-0-5" class="i">+  value STRING DEFAULT NULL
</a><a href="#h4-0-6" id="h4-0-6" class="i">+)
</a><b>diff --git a/<a id="h5" href="../file/src/sql/tests/schema/create_table_null_not.html">src/sql/tests/schema/create_table_null_not</a> b/<a href="../file/src/sql/tests/schema/create_table_null_not.html">src/sql/tests/schema/create_table_null_not</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -0,0 +1,7 @@
</a><a href="#h5-0-0" id="h5-0-0" class="i">+Query: CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NOT NULL)
</a><a href="#h5-0-1" id="h5-0-1" class="i">+
</a><a href="#h5-0-2" id="h5-0-2" class="i">+Storage:
</a><a href="#h5-0-3" id="h5-0-3" class="i">+CREATE TABLE name (
</a><a href="#h5-0-4" id="h5-0-4" class="i">+  id INTEGER PRIMARY KEY NOT NULL,
</a><a href="#h5-0-5" id="h5-0-5" class="i">+  value STRING NOT NULL
</a><a href="#h5-0-6" id="h5-0-6" class="i">+)
</a><b>diff --git a/<a id="h6" href="../file/src/sql/tests/schema/create_table_null_not_null.html">src/sql/tests/schema/create_table_null_not_null</a> b/<a href="../file/src/sql/tests/schema/create_table_null_not_null.html">src/sql/tests/schema/create_table_null_not_null</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -0,0 +1,4 @@
</a><a href="#h6-0-0" id="h6-0-0" class="i">+Query: CREATE TABLE name (id INTEGER PRIMARY KEY, value STRING NULL NOT NULL)
</a><a href="#h6-0-1" id="h6-0-1" class="i">+Error: Value(&quot;Column value can\&#39;t be both not nullable and nullable&quot;)
</a><a href="#h6-0-2" id="h6-0-2" class="i">+
</a><a href="#h6-0-3" id="h6-0-3" class="i">+Storage:
</a><a href="#h6-0-4" id="h6-0-4" class="i">+\ No newline at end of file
</a></pre>
</div>
</body>
</html>
