<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>REFERENCE: minor cleanups - toydb - An SQL engine written in Rust
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>toydb</h1><span class="desc">An SQL engine written in Rust
</span></td></tr><tr class="url"><td></td><td>git clone <a href="https://github.com/erikgrinaker/toydb">https://github.com/erikgrinaker/toydb</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/2576756db7f8b3ff501c9761ad928d96dc22bfc5.html">2576756db7f8b3ff501c9761ad928d96dc22bfc5</a>
<b>parent</b> <a href="../commit/0a52d7cfdf17bfbb600f64cd6ce68e66bb1256e8.html">0a52d7cfdf17bfbb600f64cd6ce68e66bb1256e8</a>
<b>Author:</b> Erik Grinaker &lt;<a href="mailto:erik@grinaker.org">erik@grinaker.org</a>&gt;
<b>Date:</b>   Mon, 13 Apr 2020 15:18:44 +0200

REFERENCE: minor cleanups

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">REFERENCE.md</a></td><td> | </td><td class="num">55</td><td><span class="i">+++++++++++++++++++++++</span><span class="d">--------------------------------</span></td></tr>
</table></pre><pre>1 file changed, 23 insertions(+), 32 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/REFERENCE.md.html">REFERENCE.md</a> b/<a href="../file/REFERENCE.md.html">REFERENCE.md</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -2,44 +2,44 @@
</a> 
 ## Data Types
 
<a href="#h0-0-3" id="h0-0-3" class="d">-The following data types are supported, and can be used as column types:
</a><a href="#h0-0-4" id="h0-0-4" class="i">+The following data types are supported:
</a> 
 * `BOOLEAN` (`BOOL`): logical truth values, i.e. true and false.
<a href="#h0-0-7" id="h0-0-7" class="d">-* `FLOAT` (`DOUBLE`): 64-bit signed floating point numbers, using [IEEE 754 `binary64`](https://en.wikipedia.org/wiki/binary64) encoding. Supports a magnitude of 10‚Åª¬≥‚Å∞‚Å∑ to 10¬≥‚Å∞‚Å∏, and 53-bit precision (exact up to 15 significant figures), as well as the special values infinity and NaN.
</a><a href="#h0-0-8" id="h0-0-8" class="i">+* `FLOAT` (`DOUBLE`): 64-bit signed floating point numbers, using [IEEE 754 `binary64`](https://en.wikipedia.org/wiki/binary64) encoding. Supports magnitudes of 10‚Åª¬≥‚Å∞‚Å∑ to 10¬≥‚Å∞‚Å∏ with 53-bit precision (~15 significant figures), as well as the special values infinity and NaN.
</a> * `INTEGER` (`INT`): 64-bit signed integer numbers with a range of ¬±2‚Å∂¬≥-1.
 * `STRING` (`CHAR`, `TEXT`, `VARCHAR`): UTF-8 encoded strings up to 1024 bytes.
 
<a href="#h0-0-12" id="h0-0-12" class="d">-In addition, the special `NULL` value is used for an unknown value of unknown data type, following the rules of [three-valued logic](https://en.wikipedia.org/wiki/Three-valued_logic).
</a><a href="#h0-0-13" id="h0-0-13" class="i">+In addition, the special `NULL` value is used for an unknown value, following the rules of [three-valued logic](https://en.wikipedia.org/wiki/Three-valued_logic).
</a> 
<a href="#h0-0-15" id="h0-0-15" class="d">-Numeric types are not interchangable when stored; a float value cannot be stored in an integer column and vice-versa, even if the float value does not have a fractional part (e.g. `3.0`).
</a><a href="#h0-0-16" id="h0-0-16" class="i">+Numeric types are not interchangable; a float value (even without a fractional part) cannot be stored in an integer column and vice-versa.
</a> 
 ## SQL Syntax
 
 ### Keywords
 
<a href="#h0-0-22" id="h0-0-22" class="d">-Keywords are reserved words that have special meaning in SQL statements, such as `SELECT`. These cannot be used as identifiers (e.g. table names) unless quoted with `&quot;`. Keywords are case-insensitive. The complete list of keywords is:
</a><a href="#h0-0-23" id="h0-0-23" class="i">+Keywords are reserved words with special meaning in SQL statements. They are case-insensitive, and must be quoted with `&quot;` to be used as identifiers. The complete list is:
</a> 
 `AS`, `ASC`, `AND`, `BEGIN`, `BOOL`, `BOOLEAN`, `BY`, `CHAR`, `COMMIT`, `CREATE`, `CROSS`, `DEFAULT`,`DELETE`, `DESC`, `DOUBLE`, `DROP`, `EXPLAIN`, `FALSE`, `FLOAT`, `FROM`, `GROUP`, `HAVING`, `INFINITY`, `INNER`, `INSERT`, `INT`, `INTEGER`, `INTO`, `IS`, `JOIN`, `KEY`, `LEFT`, `LIKE`, `LIMIT`, `NAN`, `NOT`, `NULL`, `OF`, `OFFSET`, `ON`, `ONLY`, `OR`, `ORDER`, `OUTER`, `PRIMARY`, `READ`, `REFERENCES`, `RIGHT`, `ROLLBACK`, `SELECT`, `SET`, `STRING`, `SYSTEM`, `TABLE`, `TEXT`, `TIME`, `TRANSACTION`, `TRUE`, `UNIQUE`, `UPDATE`, `VALUES`, `VARCHAR`, `WHERE`, `WRITE`
 
 ### Identifiers
 
<a href="#h0-0-29" id="h0-0-29" class="d">-Identifiers are names for database objects, such as tables and columns. Unless quoted with `&quot;`, identifiers may not be reserved keywords, must begin with any Unicode letter, and can contain any combination of Unicode letters, numbers, and underscores (`_`). Identifiers are automatically converted to lowercase, and have no length limit. In quoted identifiers, `&quot;&quot;` can be used to escape a double quote character.
</a><a href="#h0-0-30" id="h0-0-30" class="i">+Identifiers are names for database objects such as tables and columns. Unless quoted with `&quot;`, they must begin with a Unicode letter followed by any combination of letters, numbers, and `_`, and cannot be reserved keywords. `&quot;&quot;` can be used to escape a double quote character. They are always converted to lowercase.
</a> 
 ### Constants
 
 #### Named constants
 
<a href="#h0-0-36" id="h0-0-36" class="d">-The following case-insensitive keywords evaluate to constants:
</a><a href="#h0-0-37" id="h0-0-37" class="i">+The following keywords evaluate to constants:
</a> 
<a href="#h0-0-39" id="h0-0-39" class="d">-* `FALSE`: the `BOOLEAN` false value.
</a><a href="#h0-0-40" id="h0-0-40" class="d">-* `INFINITY`: the IEEE 754 `binary64` floating-point value for infinity.
</a><a href="#h0-0-41" id="h0-0-41" class="d">-* `NAN`: the IEEE 754 `binary64` floating-point value for NaN (not a number).
</a><a href="#h0-0-42" id="h0-0-42" class="d">-* `NULL`: the unknown value.
</a><a href="#h0-0-43" id="h0-0-43" class="d">-* `TRUE`: the `BOOLEAN` true value.
</a><a href="#h0-0-44" id="h0-0-44" class="i">+* `FALSE`: the boolean false value.
</a><a href="#h0-0-45" id="h0-0-45" class="i">+* `INFINITY`: the floating-point value for infinity.
</a><a href="#h0-0-46" id="h0-0-46" class="i">+* `NAN`: the floating-point value for NaN (not a number).
</a><a href="#h0-0-47" id="h0-0-47" class="i">+* `NULL`: an unknown value.
</a><a href="#h0-0-48" id="h0-0-48" class="i">+* `TRUE`: the boolean true value.
</a> 
 #### String literals
 
<a href="#h0-0-52" id="h0-0-52" class="d">-String literals are surrounded by single quotes `&#39;`, and may contain any valid UTF-8 character. Single quotes must be escaped by an additional single quote, i.e. `&#39;&#39;`, no other escape sequences are supported. For example:
</a><a href="#h0-0-53" id="h0-0-53" class="i">+String literals are surrounded by single quotes `&#39;`, and can contain any valid UTF-8 character. Single quotes must be escaped by an additional single quote, i.e. `&#39;&#39;`, no other escape sequences are supported. For example:
</a> 
 ```
 &#39;A string with &#39;&#39;quotes&#39;&#39; and emojis üòÄ&#39;
<a href="#h0-1" id="h0-1" class="h">@@ -57,9 +57,9 @@ The `-` prefix operator can be used to take negative numbers.
</a> 
 ### Expressions
 
<a href="#h0-1-3" id="h0-1-3" class="d">-Expressions can be used wherever a value is expected, e.g. as `SELECT` fields and `INSERT` values, and can be either a constant, a column reference, an operator invocation, or a function call.
</a><a href="#h0-1-4" id="h0-1-4" class="i">+Expressions can be used wherever a value is expected, e.g. as `SELECT` fields and `INSERT` values. They are made up of constants, a column references, an operator invocations, and a function calls.
</a> 
<a href="#h0-1-6" id="h0-1-6" class="d">-Column references can either be unqualified, e.g. `name`, or prefixed with the relation identifier separated by `.`, e.g. `person.name`. Unqualified identifiers must be unambiguous, otherwise an error is returned.
</a><a href="#h0-1-7" id="h0-1-7" class="i">+Column references can either be unqualified, e.g. `name`, or prefixed with the relation identifier separated by `.`, e.g. `person.name`. Unqualified identifiers must be unambiguous.
</a> 
 ## SQL Operators
 
<a href="#h0-2" id="h0-2" class="h">@@ -93,7 +93,7 @@ The complete truth tables are:
</a> 
 ### Comparison operators
 
<a href="#h0-2-3" id="h0-2-3" class="d">-Comparison operators compare values of the same data type, and return `TRUE` if the comparison holds, otherwise `FALSE`. `INTEGER` and `FLOAT` values are interchangeable. `STRING` comparisons are byte-wise, i.e. case-sensitive with `B` considered lesser than `a` due to their UTF-8 code points. `FALSE` is considered lesser than `TRUE`. Comparison with `NULL` always yields `NULL` (even `NULL = NULL`).
</a><a href="#h0-2-4" id="h0-2-4" class="i">+Comparison operators compare values of the same data type, and return `TRUE` if the comparison holds or `FALSE` otherwise. `INTEGER` and `FLOAT` values are interchangeable. `STRING` comparisons use the string&#39;s byte values, i.e. case-sensitive with `&#39;B&#39; &lt; &#39;a&#39;` due to their UTF-8 code points. `FALSE` is considered lesser than `TRUE`. Comparison with `NULL` always yields `NULL` (even `NULL = NULL`).
</a> 
 Binary operators:
 
<a href="#h0-3" id="h0-3" class="h">@@ -111,9 +111,9 @@ Unary operators:
</a> 
 ### Mathematical operators
 
<a href="#h0-3-3" id="h0-3-3" class="d">-Mathematical operators apply standard math operations on numeric (`INTEGER` or `FLOAT`) operands. If either operand is a `FLOAT`, both operands are converted to `FLOAT` and the result is a `FLOAT`. If either operand is `NULL`, the result is `NULL`. The special values `INFINITY` and `NAN` are handled according to the IEEE 754 `binary64` spec.
</a><a href="#h0-3-4" id="h0-3-4" class="i">+Mathematical operators apply standard math operations on numeric (`INTEGER` or `FLOAT`) operands. If either operand is a `FLOAT`, both operands are converted to `FLOAT` and the result is a `FLOAT`. If either operand is `NULL`, the result is `NULL`. The special values `INFINITY` and `NAN` are handled according to the IEEE 754 spec.
</a> 
<a href="#h0-3-6" id="h0-3-6" class="d">-For `INTEGER` operands, failure conditions such as overflow and division by zero yield an error, while for `FLOAT` operands these return `INFINITY` or `NAN` as appropriate.
</a><a href="#h0-3-7" id="h0-3-7" class="i">+For `INTEGER` operands, failure conditions such as overflow and division by zero yield an error. For `FLOAT` operands, these return `INFINITY` or `NAN` as appropriate.
</a> 
 Binary operators:
 
<a href="#h0-4" id="h0-4" class="h">@@ -162,10 +162,10 @@ Aggregate function aggregate an expression across all rows, optionally grouped i
</a> 
 * `COUNT(expr)`: returns the number of rows for which ***`expr`*** evaluates to a non-`NULL` value. `COUNT(*)` can be used to count all rows.
 
<a href="#h0-4-3" id="h0-4-3" class="i">+* `MAX(expr)`: returns the maximum value, according to the datatype&#39;s ordering.
</a><a href="#h0-4-4" id="h0-4-4" class="i">+
</a> * `MIN(expr)`: returns the minimum value, according to the datatype&#39;s ordering.
 
<a href="#h0-4-7" id="h0-4-7" class="d">-* `MIN(expr)`: returns the maximum value, according to the datatype&#39;s ordering.
</a><a href="#h0-4-8" id="h0-4-8" class="d">-* 
</a> * `SUM(expr)`: returns the sum of numerical values.
 
 ## SQL Statements
<a href="#h0-5" id="h0-5" class="h">@@ -404,19 +404,10 @@ WHERE release_year &gt;= 2000 AND bluray = FALSE
</a> 
 ## Transactions
 
<a href="#h0-5-3" id="h0-5-3" class="d">-ToyDB supports ACID transactions using MVCC-based snapshot isolation. A new transaction is started with `BEGIN`, and ended with either `COMMIT` (atomically writing all changes) or `ROLLBACK` (discarding all changes). If any conflicts occur between concurrent transactions, the one with the lowest transaction ID wins and the others will receive a serialization error and must retry.
</a><a href="#h0-5-4" id="h0-5-4" class="d">-
</a><a href="#h0-5-5" id="h0-5-5" class="d">-Snapshot isolation protects against the following anomalies:
</a><a href="#h0-5-6" id="h0-5-6" class="d">-
</a><a href="#h0-5-7" id="h0-5-7" class="d">-* Dirty writes
</a><a href="#h0-5-8" id="h0-5-8" class="d">-* Dirty reads
</a><a href="#h0-5-9" id="h0-5-9" class="d">-* Lost updates
</a><a href="#h0-5-10" id="h0-5-10" class="d">-* Fuzzy reads
</a><a href="#h0-5-11" id="h0-5-11" class="d">-* Read skew
</a><a href="#h0-5-12" id="h0-5-12" class="d">-* Phantom read
</a><a href="#h0-5-13" id="h0-5-13" class="i">+ToyDB supports ACID transactions using MVCC-based snapshot isolation, protecting from the following anomalies: dirty writes, dirty reads, lost updates, fuzzy reads, read skew, and phantom reads. However, write skew anomalies are possible since serializable snapshot isolation is not implemented.
</a> 
<a href="#h0-5-15" id="h0-5-15" class="d">-However, since ToyDB doesn&#39;t use serializable snapshot isolation it exhibits write skew anomalies.
</a><a href="#h0-5-16" id="h0-5-16" class="i">+A new transaction is started with `BEGIN`, and ended with either `COMMIT` (atomically writing all changes) or `ROLLBACK` (discarding all changes). If any conflicts occur between concurrent transactions, the lowest transaction ID wins and the others will fail with a serialization error and must retry.
</a> 
 All past data is versioned and retained, and can be queried as of a given transaction ID via `BEGIN TRANSACTION READ ONLY AS OF SYSTEM TIME &lt;txn_id&gt;`.
 
<a href="#h0-5-20" id="h0-5-20" class="d">-A transaction is still valid for use if a containing statement returns an error, it is up to the client to take appropriate action.
</a><a href="#h0-5-21" id="h0-5-21" class="i">+A transaction is still valid for use if a contained statement returns an error. It is up to the client to take appropriate action.
</a></pre>
</div>
</body>
</html>
