<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>brand as toyDB - toydb - An SQL engine written in Rust
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>toydb</h1><span class="desc">An SQL engine written in Rust
</span></td></tr><tr class="url"><td></td><td>git clone <a href="https://github.com/erikgrinaker/toydb">https://github.com/erikgrinaker/toydb</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/c02ac621296c0bdd6400cb471acdfd1de5401031.html">c02ac621296c0bdd6400cb471acdfd1de5401031</a>
<b>parent</b> <a href="../commit/ae84b635b7f53ecd0510c387320643c798db2b4c.html">ae84b635b7f53ecd0510c387320643c798db2b4c</a>
<b>Author:</b> Erik Grinaker &lt;<a href="mailto:erik@grinaker.org">erik@grinaker.org</a>&gt;
<b>Date:</b>   Tue,  5 May 2020 21:26:23 +0200

brand as toyDB

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">README.md</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">docs/README.md</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">docs/sql.md</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">src/bin/toysql.rs</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">src/client.rs</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">src/server.rs</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
</table></pre><pre>6 files changed, 9 insertions(+), 9 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/README.md.html">README.md</a> b/<a href="../file/README.md.html">README.md</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -114,7 +114,7 @@ The primary goal is to build a minimally functional yet correct distributed data
</a> 
 ### Schema
 
<a href="#h0-0-3" id="h0-0-3" class="d">-* **Single database:** only a single, unnamed database is supported per ToyDB cluster.
</a><a href="#h0-0-4" id="h0-0-4" class="i">+* **Single database:** only a single, unnamed database is supported per toyDB cluster.
</a> 
 * **Schema changes:** schema changes other than creating or dropping tables is not supported.
 
<b>diff --git a/<a id="h1" href="../file/docs/README.md.html">docs/README.md</a> b/<a href="../file/docs/README.md.html">docs/README.md</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -1,3 +1,3 @@
</a><a href="#h1-0-0" id="h1-0-0" class="d">-# ToyDB Documentation
</a><a href="#h1-0-1" id="h1-0-1" class="i">+# toyDB Documentation
</a> 
 * [SQL reference](sql.md)
 \ No newline at end of file
<b>diff --git a/<a id="h2" href="../file/docs/sql.md.html">docs/sql.md</a> b/<a href="../file/docs/sql.md.html">docs/sql.md</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -406,7 +406,7 @@ WHERE release_year &gt;= 2000 AND bluray = FALSE
</a> 
 ## Transactions
 
<a href="#h2-0-3" id="h2-0-3" class="d">-ToyDB supports ACID transactions using MVCC-based snapshot isolation, protecting from the following anomalies: dirty writes, dirty reads, lost updates, fuzzy reads, read skew, and phantom reads. However, write skew anomalies are possible since serializable snapshot isolation is not implemented.
</a><a href="#h2-0-4" id="h2-0-4" class="i">+toyDB supports ACID transactions using MVCC-based snapshot isolation, protecting from the following anomalies: dirty writes, dirty reads, lost updates, fuzzy reads, read skew, and phantom reads. However, write skew anomalies are possible since serializable snapshot isolation is not implemented.
</a> 
 A new transaction is started with `BEGIN`, and ended with either `COMMIT` (atomically writing all changes) or `ROLLBACK` (discarding all changes). If any conflicts occur between concurrent transactions, the lowest transaction ID wins and the others will fail with a serialization error and must retry.
 
<b>diff --git a/<a id="h3" href="../file/src/bin/toysql.rs.html">src/bin/toysql.rs</a> b/<a href="../file/src/bin/toysql.rs.html">src/bin/toysql.rs</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -1,5 +1,5 @@
</a> /*
<a href="#h3-0-1" id="h3-0-1" class="d">- * ToySQL is a command-line client for ToyDB. It can connect to any ToyDB node
</a><a href="#h3-0-2" id="h3-0-2" class="i">+ * ToySQL is a command-line client for toyDB. It can connect to any toyDB node
</a>  * via gRPC and run SQL queries through a REPL interface.
  */
 
<a href="#h3-1" id="h3-1" class="h">@@ -234,7 +234,7 @@ Txns:      {txns_active} active, {txns} total
</a> 
         let status = self.client.status().await?;
         println!(
<a href="#h3-1-3" id="h3-1-3" class="d">-            &quot;Connected to ToyDB node \&quot;{}\&quot;. Enter !help for instructions.&quot;,
</a><a href="#h3-1-4" id="h3-1-4" class="i">+            &quot;Connected to toyDB node \&quot;{}\&quot;. Enter !help for instructions.&quot;,
</a>             status.raft.server
         );
 
<b>diff --git a/<a id="h4" href="../file/src/client.rs.html">src/client.rs</a> b/<a href="../file/src/client.rs.html">src/client.rs</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -20,7 +20,7 @@ type Connection = tokio_serde::Framed&lt;
</a>     tokio_serde::formats::Cbor&lt;Result&lt;Response, Error&gt;, Request&gt;,
 &gt;;
 
<a href="#h4-0-3" id="h4-0-3" class="d">-/// A ToyDB client
</a><a href="#h4-0-4" id="h4-0-4" class="i">+/// A toyDB client
</a> pub struct Client {
     conn: Mutex&lt;Connection&gt;,
     txn: Cell&lt;Option&lt;(u64, Mode)&gt;&gt;,
<a href="#h4-1" id="h4-1" class="h">@@ -118,7 +118,7 @@ impl Client {
</a>     }
 }
 
<a href="#h4-1-3" id="h4-1-3" class="d">-/// A ToyDB client pool
</a><a href="#h4-1-4" id="h4-1-4" class="i">+/// A toyDB client pool
</a> pub struct Pool {
     clients: Vec&lt;Mutex&lt;Client&gt;&gt;,
 }
<b>diff --git a/<a id="h5" href="../file/src/server.rs.html">src/server.rs</a> b/<a href="../file/src/server.rs.html">src/server.rs</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -18,7 +18,7 @@ use tokio::stream::StreamExt as _;
</a> use tokio::sync::mpsc;
 use tokio_util::codec::{Framed, LengthDelimitedCodec};
 
<a href="#h5-0-3" id="h5-0-3" class="d">-/// A ToyDB server.
</a><a href="#h5-0-4" id="h5-0-4" class="i">+/// A toyDB server.
</a> pub struct Server {
     raft: raft::Server&lt;kv::storage::BLog&gt;,
     raft_listener: Option&lt;TcpListener&gt;,
<a href="#h5-1" id="h5-1" class="h">@@ -26,7 +26,7 @@ pub struct Server {
</a> }
 
 impl Server {
<a href="#h5-1-3" id="h5-1-3" class="d">-    /// Creates a new ToyDB server.
</a><a href="#h5-1-4" id="h5-1-4" class="i">+    /// Creates a new toyDB server.
</a>     pub async fn new(id: &amp;str, peers: HashMap&lt;String, String&gt;, dir: &amp;str) -&gt; Result&lt;Self, Error&gt; {
         let path = Path::new(dir);
         fs::create_dir_all(path)?;
</pre>
</div>
</body>
</html>
