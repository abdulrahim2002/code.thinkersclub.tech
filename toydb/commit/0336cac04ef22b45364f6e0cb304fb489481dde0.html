<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>README.md: more tweaks - toydb - An SQL engine written in Rust
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="toydb.git Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>toydb</h1><span class="desc">An SQL engine written in Rust
</span></td></tr><tr class="url"><td></td><td>git clone <a href="https://github.com/erikgrinaker/toydb">https://github.com/erikgrinaker/toydb</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/0336cac04ef22b45364f6e0cb304fb489481dde0.html">0336cac04ef22b45364f6e0cb304fb489481dde0</a>
<b>parent</b> <a href="../commit/cee2c7df2ba5f3061c2c555c5c782a22d9a9b795.html">cee2c7df2ba5f3061c2c555c5c782a22d9a9b795</a>
<b>Author:</b> Erik Grinaker &lt;<a href="mailto:erik@grinaker.org">erik@grinaker.org</a>&gt;
<b>Date:</b>   Wed, 24 Jul 2024 14:08:31 +0200

README.md: more tweaks

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">README.md</a></td><td> | </td><td class="num">53</td><td><span class="i">+++++++++++++++++++++++++++</span><span class="d">--------------------------</span></td></tr>
</table></pre><pre>1 file changed, 27 insertions(+), 26 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/README.md.html">README.md</a> b/<a href="../file/README.md.html">README.md</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -2,7 +2,7 @@
</a> 
 [![CI](https://github.com/erikgrinaker/toydb/actions/workflows/ci.yml/badge.svg)](https://github.com/erikgrinaker/toydb/actions/workflows/ci.yml)
 
<a href="#h0-0-3" id="h0-0-3" class="d">-Distributed SQL database in Rust, written as an educational project. Built from scratch, including:
</a><a href="#h0-0-4" id="h0-0-4" class="i">+Distributed SQL database in Rust, built from scratch as an educational project. Main features:
</a> 
 * [Raft distributed consensus engine][raft] for linearizable state machine replication.
 
<a href="#h0-1" id="h0-1" class="h">@@ -15,12 +15,12 @@ Distributed SQL database in Rust, written as an educational project. Built from 
</a> 
 * [SQL interface][sql] including joins, aggregates, and transactions.
 
<a href="#h0-1-3" id="h0-1-3" class="d">-Originally written to teach myself more about database iternals, toyDB is intended to illustrate 
</a><a href="#h0-1-4" id="h0-1-4" class="d">-the basic architecture and concepts of distributed SQL databases. It should be functional and 
</a><a href="#h0-1-5" id="h0-1-5" class="d">-correct, but focuses on simplicity and understandability. In particular, performance, scalability, 
</a><a href="#h0-1-6" id="h0-1-6" class="d">-and availability are explicit non-goals -- these are major sources of complexity in 
</a><a href="#h0-1-7" id="h0-1-7" class="d">-production-grade databases, which obscure the basic underlying concepts. Shortcuts have been taken 
</a><a href="#h0-1-8" id="h0-1-8" class="d">-wherever possible.
</a><a href="#h0-1-9" id="h0-1-9" class="i">+Originally written to learn more about database internals, toyDB is intended to illustrate the basic
</a><a href="#h0-1-10" id="h0-1-10" class="i">+architecture and concepts of distributed SQL databases. It focuses on simplicity and 
</a><a href="#h0-1-11" id="h0-1-11" class="i">+understandability, and should be functional and correct. Other aspects like performance,
</a><a href="#h0-1-12" id="h0-1-12" class="i">+scalability, and availability are explicit non-goals -- these are major sources of complexity in 
</a><a href="#h0-1-13" id="h0-1-13" class="i">+production-grade  databases, which obscure the basic underlying concepts. Shortcuts have been taken 
</a><a href="#h0-1-14" id="h0-1-14" class="i">+where possible.
</a> 
 [raft]: https://github.com/erikgrinaker/toydb/blob/master/src/raft/mod.rs
 [txn]: https://github.com/erikgrinaker/toydb/blob/master/src/storage/mvcc.rs
<a href="#h0-2" id="h0-2" class="h">@@ -39,12 +39,12 @@ wherever possible.
</a> 
 * [SQL reference](docs/sql.md): toyDB SQL reference documentation.
 
<a href="#h0-2-3" id="h0-2-3" class="d">-* [References](docs/references.md): books and other material used while building toyDB.
</a><a href="#h0-2-4" id="h0-2-4" class="i">+* [References](docs/references.md): books and other materials used while building toyDB.
</a> 
 ## Usage
 
 With a [Rust compiler](https://www.rust-lang.org/tools/install) installed, a local five-node 
<a href="#h0-2-9" id="h0-2-9" class="d">-cluster can be started on `localhost` ports `9601` to `9605`, with data under `cluster/*/data`:
</a><a href="#h0-2-10" id="h0-2-10" class="i">+cluster can be built and started as:
</a> 
 ```
 $ ./cluster/run.sh
<a href="#h0-3" id="h0-3" class="h">@@ -74,22 +74,23 @@ toydb&gt; SELECT * FROM movies;
</a> 3, &#39;Her&#39;
 ```
 
<a href="#h0-3-3" id="h0-3-3" class="d">-toyDB supports most common SQL features, including joins, aggregates, and ACID transactions.
</a><a href="#h0-3-4" id="h0-3-4" class="d">-Here is an `EXPLAIN` query plan of a more complex query, fetching movies from studios that
</a><a href="#h0-3-5" id="h0-3-5" class="d">-have released movies with an IMDb rating of 8 or more:
</a><a href="#h0-3-6" id="h0-3-6" class="i">+toyDB supports most common SQL features, including joins, aggregates, and transactions.
</a><a href="#h0-3-7" id="h0-3-7" class="i">+
</a><a href="#h0-3-8" id="h0-3-8" class="i">+Below is an `EXPLAIN` query plan of a more complex query, fetching movies from studios that have
</a><a href="#h0-3-9" id="h0-3-9" class="i">+released movies with an IMDb rating of 8 or more:
</a> 
 ```
<a href="#h0-3-12" id="h0-3-12" class="d">-toydb&gt; EXPLAIN SELECT m.id, m.title, g.name AS genre, s.name AS studio, m.rating
</a><a href="#h0-3-13" id="h0-3-13" class="i">+toydb&gt; EXPLAIN SELECT m.title, g.name AS genre, s.name AS studio, m.rating
</a>   FROM movies m JOIN genres g ON m.genre_id = g.id,
     studios s JOIN movies good ON good.studio_id = s.id AND good.rating &gt;= 8
   WHERE m.studio_id = s.id
<a href="#h0-3-17" id="h0-3-17" class="d">-  GROUP BY m.id, m.title, g.name, s.name, m.rating, m.released
</a><a href="#h0-3-18" id="h0-3-18" class="d">-  ORDER BY m.rating DESC, m.released ASC, m.id ASC;
</a><a href="#h0-3-19" id="h0-3-19" class="i">+  GROUP BY m.title, g.name, s.name, m.rating, m.released
</a><a href="#h0-3-20" id="h0-3-20" class="i">+  ORDER BY m.rating DESC, m.released ASC, m.title ASC;
</a> 
<a href="#h0-3-22" id="h0-3-22" class="d">-Remap: m.id, m.title, genre, studio, m.rating (dropped: m.released)
</a><a href="#h0-3-23" id="h0-3-23" class="d">-└─ Order: m.rating desc, m.released asc, m.id asc
</a><a href="#h0-3-24" id="h0-3-24" class="d">-   └─ Projection: m.id, m.title, g.name as genre, s.name as studio, m.rating, m.released
</a><a href="#h0-3-25" id="h0-3-25" class="d">-      └─ Aggregate: m.id, m.title, g.name, s.name, m.rating, m.released
</a><a href="#h0-3-26" id="h0-3-26" class="i">+Remap: m.title, genre, studio, m.rating (dropped: m.released)
</a><a href="#h0-3-27" id="h0-3-27" class="i">+└─ Order: m.rating desc, m.released asc, m.title asc
</a><a href="#h0-3-28" id="h0-3-28" class="i">+   └─ Projection: m.title, g.name as genre, s.name as studio, m.rating, m.released
</a><a href="#h0-3-29" id="h0-3-29" class="i">+      └─ Aggregate: m.title, g.name, s.name, m.rating, m.released
</a>          └─ HashJoin: inner on m.studio_id = s.id
             ├─ HashJoin: inner on m.genre_id = g.id
             │  ├─ Scan: movies as m
<a href="#h0-4" id="h0-4" class="h">@@ -101,17 +102,17 @@ Remap: m.id, m.title, genre, studio, m.rating (dropped: m.released)
</a> 
 ## Architecture
 
<a href="#h0-4-3" id="h0-4-3" class="d">-[![toyDB architecture](./docs/images/architecture.svg)](./docs/architecture.md)
</a><a href="#h0-4-4" id="h0-4-4" class="d">-
</a> toyDB&#39;s architecture is fairly typical for a distributed SQL database: a transactional
 key/value store managed by a Raft cluster with a SQL query engine on top. See the
 [architecture guide](./docs/architecture.md) for more details.
 
<a href="#h0-4-9" id="h0-4-9" class="i">+[![toyDB architecture](./docs/images/architecture.svg)](./docs/architecture.md)
</a><a href="#h0-4-10" id="h0-4-10" class="i">+
</a> ## Tests
 
<a href="#h0-4-13" id="h0-4-13" class="d">-toyDB mostly uses [Goldenscripts](https://github.com/erikgrinaker/goldenscript) for tests. These 
</a><a href="#h0-4-14" id="h0-4-14" class="d">-are used to script various scenarios, capture events and output, and later assert that the
</a><a href="#h0-4-15" id="h0-4-15" class="d">-behavior remains the same. See e.g.:
</a><a href="#h0-4-16" id="h0-4-16" class="i">+toyDB mainly uses [Goldenscripts](https://github.com/erikgrinaker/goldenscript) for tests. These 
</a><a href="#h0-4-17" id="h0-4-17" class="i">+script various scenarios, capture events and output, and later assert that the behavior remains the 
</a><a href="#h0-4-18" id="h0-4-18" class="i">+same. See e.g.:
</a> 
 * [Raft cluster tests](https://github.com/erikgrinaker/toydb/tree/master/src/raft/testscripts/node)
 * [MVCC transaction tests](https://github.com/erikgrinaker/toydb/tree/master/src/storage/testscripts/mvcc)
<a href="#h0-5" id="h0-5" class="h">@@ -154,8 +155,8 @@ The available workloads are:
</a> 
 * `read`: single-row primary key lookups.
 * `write`: single-row inserts to sequential primary keys.
<a href="#h0-5-3" id="h0-5-3" class="d">-* `bank`: makes bank transfers between various customers and accounts. To make things interesting,
</a><a href="#h0-5-4" id="h0-5-4" class="d">-  this includes joins, secondary indexes, sorting, and conflicts.
</a><a href="#h0-5-5" id="h0-5-5" class="i">+* `bank`: bank transfers between various customers and accounts. To make things interesting, this
</a><a href="#h0-5-6" id="h0-5-6" class="i">+  includes joins, secondary indexes, sorting, and conflicts.
</a> 
 For more information about workloads and parameters, run `cargo run --bin workload -- --help`.
 
</pre>
</div>
</body>
</html>
